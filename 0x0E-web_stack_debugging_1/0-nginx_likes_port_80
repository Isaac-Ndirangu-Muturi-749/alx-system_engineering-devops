#!/bin/bash
# Nginx must be running, and listening on port 80 of all the serverâ€™s active IPv4 IPs
# Write a Bash script that configures a server to the above requirements

# Step 1: Ensure Nginx configuration is set to listen on port 80
sed -i 's/listen\s*80;/listen 80 default_server;/g' /etc/nginx/sites-available/default

# Step 2: Check if any other process is listening on port 80
port_80_status=$(netstat -tuln | grep ':80')

if [ -z "$port_80_status" ]; then
    echo "No other process is listening on port 80."
else
    echo "There is another process listening on port 80. Please check and stop it."
    exit 1
fi

# Step 3: Restart Nginx service
service nginx restart

echo "Nginx has been configured to listen on port 80."
